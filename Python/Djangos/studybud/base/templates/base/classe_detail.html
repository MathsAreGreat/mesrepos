<!-- prettier-ignore -->
{% extends 'base/main.html' %} 
{% block title %}{{ classe.name }} - Classe{% endblock %} 
{% block content %}
<div class="container py-5">
	<div class="row justify-content-center">
		<div class="col-lg-10">
			<!-- Classe Header Card -->
			<div
				class="card classe-header-card bg-dark text-light shadow-lg border-0 mb-5"
			>
				<div class="classe-accent-bar"></div>
				<div class="card-body p-5">
					<div class="d-flex justify-content-between align-items-center mb-4">
						<div class="d-flex align-items-center">
							<i class="fas fa-graduation-cap text-success me-3 fs-1"></i>
							<div>
								<h1 class="classe-title mb-2">{{ classe.name }}</h1>
								<div class="classe-meta">
									<span class="badge bg-primary me-2">
										<i class="fas fa-hashtag me-1"></i>{{ classe.title }}
									</span>
									{% if classe.level %}
									<span class="badge bg-info text-dark me-2">
										<i class="fas fa-layer-group me-1"></i>
										{{ classe.level.title }}
									</span>
									{% endif %} {% if classe.year %}
									<span class="badge bg-warning text-dark me-2">
										<i class="fas fa-calendar me-1"></i>{{ classe.year }}
									</span>
									{% endif %}
								</div>
							</div>
						</div>
						<div class="text-end">
							<div class="classe-stats">
								<div class="stat-item">
									<i class="fas fa-book-open text-info me-2"></i>
									<span class="stat-number">{{ chapters|length }}</span>
									<span class="stat-label">Chapters</span>
								</div>
								<div class="stat-item">
									<i class="fas fa-file-alt text-warning me-2"></i>
									<span class="stat-number">{{ total_posts }}</span>
									<span class="stat-label">Posts</span>
								</div>
							</div>
						</div>
					</div>
					<div class="classe-actions mt-3">
						<a href="{% url 'home' %}" class="btn btn-outline-light me-2">
							<i class="fas fa-arrow-left me-1"></i>All Posts
						</a>
						{% if user.is_superuser %}
						<a
							href="{% url 'update-classe' classe.pk %}"
							class="btn btn-outline-info"
						>
							<i class="fas fa-edit me-1"></i>Edit Classe
						</a>
						{% endif %}
					</div>
				</div>
			</div>

			<!-- Chapters Section -->
			<div class="mb-5">
				<h2 class="section-title text-start mb-3">
					<i class="fas fa-layer-group text-success me-2"></i>
					Chapters ({{ chapters|length }})
				</h2>
				{% if chapters %}
				<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
					{% for chapter in chapters %}
					<div class="col">
						<!-- prettier-ignore -->
						<a href="{% url 'chapter-detail' chapter.pk %}" class="text-decoration-none">
							<div class="card chapter-glass-card bg-dark text-light h-100 border-0 shadow-sm">
								<div class="chapter-glass-accent"></div>
								<div class="card-body p-4">
									<div class="d-flex align-items-center mb-2">
										<i class="fas fa-book-open text-info me-2 fs-5"></i>
										<h5 class="fw-bold mb-0 flex-grow-1">{{ chapter.title }}</h5>
									</div>
									<div class="mb-2 small text-light-50">
										<i class="fas fa-calendar-plus me-1 text-info"></i>
										{{ chapter.created_datetime|date:"M d, Y" }}
									</div>
									<div class="d-flex flex-wrap gap-2 mt-2">
										{% if chapter.domaine %}
										<!-- prettier-ignore -->
										<span class="badge bg-primary bg-opacity-75">
											<i class="fas fa-layer-group me-1"></i>{{ chapter.domaine.title }}
										</span>
										{% endif %}
										{% if chapter.semester %}
										<!-- prettier-ignore -->
										<span class="badge bg-warning text-dark bg-opacity-75">
											<i class="fas fa-calendar me-1"></i>{{ chapter.semester.title }}
										</span>
										{% endif %}
									</div>
								</div>
							</div>
						</a>
					</div>
					{% endfor %}
				</div>
				{% else %}
				<p class="lead text-muted">No chapters in this class yet.</p>
				{% endif %}
			</div>
		</div>
	</div>
</div>

<style>
	.classe-header-card {
		border-radius: 20px;
		box-shadow: 0 4px 32px rgba(0, 0, 0, 0.25);
		position: relative;
		overflow: hidden;
		border: 1.5px solid #232a36;
	}
	.classe-accent-bar {
		height: 6px;
		width: 100%;
		background: linear-gradient(90deg, #20c997 0%, #0d6efd 100%);
	}
	.classe-title {
		font-size: 2.2rem;
		font-weight: 700;
		letter-spacing: 0.5px;
		color: #f8f9fa;
		margin: 0;
	}
	.classe-meta {
		margin-top: 1rem;
	}
	.classe-stats {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}
	.stat-item {
		display: flex;
		align-items: center;
		justify-content: flex-end;
	}
	.stat-number {
		font-size: 1.2rem;
		font-weight: 700;
		color: #20c997;
		margin: 0 0.5rem;
	}
	.stat-label {
		font-size: 0.9rem;
		color: #6c757d;
	}
	.classe-actions {
		margin-top: 2rem;
		padding-top: 1rem;
		border-top: 1px solid #495057;
	}
	.classe-chapter-card {
		transition: all 0.2s cubic-bezier(0.4, 2, 0.6, 1);
		border-radius: 14px;
	}
	.classe-chapter-card:hover {
		transform: scale(1.03);
		box-shadow: 0 8px 32px rgba(32, 201, 151, 0.13);
		border-color: #20c997;
	}
	.badge {
		font-size: 0.8rem;
		padding: 0.5rem 0.75rem;
		border-radius: 20px;
	}
	@media (max-width: 768px) {
		.classe-title {
			font-size: 1.3rem;
		}
		.classe-header-card .card-body {
			padding: 2rem !important;
		}
		.classe-stats {
			margin-top: 1rem;
		}
	}
	.chapter-mini-card {
		transition: all 0.22s cubic-bezier(0.4, 2, 0.6, 1);
		border-radius: 14px;
		border: 1.5px solid #343a40;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
	}
	.chapter-mini-card:hover {
		transform: scale(1.035);
		box-shadow: 0 8px 32px rgba(13, 110, 253, 0.13);
		border-color: #0dcaf0;
		z-index: 2;
	}
	.chapter-glass-card {
		background: rgba(24, 28, 36, 0.92) !important;
		backdrop-filter: blur(2px);
		border-radius: 16px;
		box-shadow: 0 2px 12px rgba(0, 0, 0, 0.13);
		transition: all 0.22s cubic-bezier(0.4, 2, 0.6, 1);
		border: 1.5px solid #232a36;
		position: relative;
		overflow: hidden;
	}
	.chapter-glass-card:hover {
		transform: scale(1.035);
		box-shadow: 0 8px 32px rgba(13, 110, 253, 0.13);
		border-color: #0dcaf0;
		z-index: 2;
	}
	.chapter-glass-accent {
		height: 4px;
		width: 100%;
		background: linear-gradient(90deg, #0dcaf0 0%, #0d6efd 100%);
		margin-bottom: 0.5rem;
	}
</style>
{% endblock %}
